# css

### 1. 内联首屏关键CSS

将首屏关键样式内联至页面中，保证最快速度看到带有基本样式的首屏，避免用户端出现较长时间的白屏时间。

### 2. 使用Sass、Stylus、Less等预编译语言时，编码CSS嵌套不超过3层

提高解析css的效率。

### 3. 尽量少使用css通配符，特别是多层嵌套的末尾使用通配符

CSS的解析过程是从右往左逆向匹配，使用CSS通配符会增加解析的计算量。

### 4. 不要滥用高消耗的样式

* `box-shadows`
* `border-radius`
* `opacity`
* `transforms`
* `CSS filters`（性能杀手）
* `position: fixed`

### 5. 较复杂动画可以使用css帧动画

在移动端兼容性好、性能好、更具有可操控性。

### 6. 对将要使用动画的部分，开启GPU硬件加速（注意不要滥用）

对开启GPU硬件加速的标签，浏览器将把他提升到一个单独的图层，并通过GPU进行预处理。

 [两张图解释 CSS 动画的性能](https://github.com/ccforward/cc/issues/42)

```css
# Not recommended
transform: translate(10px, 10px);

# Recommended 
transform: translate3d(10px, 10px, 0);
```

### 7. 使用will-change属性（注意不要滥用）

will-change的作用告诉浏览器哪些属性将要变化，让他可以提前做好准备。

### 8. 使用工具压缩图片

移动端网络条件有限，图片越大加载时间越长，合理使用工具压缩图片，可以兼顾图片质量和图片大小。

### 9. 使用雪碧图

减少http请求数，不过当我们的http协议升级至1.1，2.0之后，雪碧图减少http请求数的效果并不明显。

### 10. 图片懒加载

避免用户提前加载过多无用的资源，浪费用户流量。

### 11. 根据不同的屏幕像素比加载不同尺寸的图片

在较大像素比的屏幕下加载小尺寸的图片，图片会模糊；在较小像素比的屏幕下加载大尺寸的图片，会浪费用户流量和cdn流量。

还没有较好的实践经验。

### 12. 小于2KB的图片可以尝试使用base64格式去替换

将图片转换成base64格式可以减少http请求数量，但是，不能对较大尺寸的图片使用base64格式，因为base64算法会提升三分之一的文件大小。

### 13. 字体

* 压缩字库大小，避免加载过多无用的资源，推荐工具字蛛
* 优化字体的展示策略，使用font-display属性可以避免在字体加载过程中，不显示文字的问题
* 当特殊文字量较少且内容固定时，可以尝试使用图片代替

### 14. 减少重排（Reflow）

*  不要一条一条地修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 `className`
*  为动画的元素使用绝对定位 `absolute / fixed`

### 15. 避免过分重绘（Repaints）

 当元素改变的时候，将不会影响元素在页面当中的位置（比如 `background-color`, `border-color`, `visibility`），浏览器仅仅会应用新的样式重绘此元素，此过程称为 `Repaint`。

### 16. 压缩CSS代码，排除重复的CSS样式



















